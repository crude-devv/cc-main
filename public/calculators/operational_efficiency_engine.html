<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Definitive Operational Efficiency & Growth Engine | Crude Capital</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-dark: #111827; --color-light: #F9FAFB; --color-slate-600: #475569;
            --color-slate-400: #94A3B8; --color-slate-200: #E2E8F0; --color-accent: #14B8A6;
            --color-accent-dark: #0F766E; --color-contrast: #F59E0B; --color-contrast-dark: #B45309;
            --font-heading: 'Sora', sans-serif; --font-body: 'Inter', sans-serif;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-interactive: 0 0 0 3px color-mix(in srgb, var(--color-accent) 20%, transparent);
            --transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: var(--font-body); background-color: var(--color-light); color: var(--color-slate-600); padding: 2rem 1rem; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 24px; box-shadow: var(--shadow-lg); overflow: hidden; border: 1px solid var(--color-slate-200); }
        .main-grid { display: grid; grid-template-columns: 1fr 1.1fr; }
        .hero { padding: 4rem; text-align: center; background: var(--color-dark); }
        .hero h1 { font-family: var(--font-heading); color: white; font-size: clamp(2.5rem, 5vw, 3.25rem); line-height: 1.1; margin-bottom: 1rem; }
        .hero h1 .highlight { color: var(--color-accent); }
        .hero p { font-size: clamp(1rem, 2vw, 1.1rem); max-width: 700px; margin: 0 auto; color: var(--color-slate-400); line-height: 1.6; }
        .input-panel { padding: 3rem; background-color: var(--color-light); border-right: 1px solid var(--color-slate-200); }
        .input-panel h2 { font-family: var(--font-heading); color: var(--color-dark); font-size: 1.75rem; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center; }
        .input-panel h2 .location-count { font-size: 1rem; font-weight: 600; color: var(--color-accent); background-color: color-mix(in srgb, var(--color-accent) 15%, transparent); padding: 0.25rem 0.75rem; border-radius: 99px; }
        .location-list { margin-bottom: 1.5rem; }
        .location-input-card { background: white; border: 1px solid var(--color-slate-200); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; position: relative; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .slider-group { margin-bottom: 0; }
        .slider-label-container { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 1rem; }
        .slider-label { font-size: 1rem; font-weight: 600; color: var(--color-dark); }
        .slider-value { font-family: var(--font-heading); font-size: 1.25rem; font-weight: 600; color: var(--color-accent); }
        input[type="range"] { -webkit-appearance: none; width: 100%; height: 8px; background: var(--color-slate-200); border-radius: 5px; outline: none; padding: 0; margin: 0; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; background: white; border-radius: 50%; border: 5px solid var(--color-accent); cursor: pointer; transition: transform 0.2s ease; margin-top: -8px; }
        .remove-location-btn { position: absolute; top: 0.5rem; right: 0.5rem; background: none; border: none; cursor: pointer; color: var(--color-slate-400); padding: 0.25rem; opacity: 0; transition: var(--transition-fast); }
        .location-input-card:hover .remove-location-btn { opacity: 1; }
        .location-input-card:first-of-type .remove-location-btn { display: none; }
        .add-location-btn { width: 100%; background: none; border: 2px dashed var(--color-slate-200); color: var(--color-slate-600); padding: 1rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: var(--transition-fast); margin-bottom: 2rem; }
        .add-location-btn:hover { background: white; border-color: var(--color-accent); color: var(--color-accent); }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--color-dark); }
        .form-group select { width: 100%; padding: 1rem; border: 1px solid var(--color-slate-200); border-radius: 12px; font-size: 1rem; background-color: white; -webkit-appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2364748b' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.7rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; }
        .results-panel { padding: 3rem; background-color: white; }
        .results-panel h2, .results-panel h3.solution-header { font-family: var(--font-heading); color: var(--color-dark); text-align: center; margin-bottom: 2rem; }
        .results-panel h2 { font-size: 1.75rem; }
        .results-panel h3.solution-header { font-size: 1.5rem; }
        .impact-section { background-color: var(--color-dark); color: white; padding: 2.5rem; border-radius: 16px; text-align: center; margin-bottom: 2.5rem; }
        .impact-section.problem { background-color: var(--color-contrast-dark); }
        .impact-section.funding { background-color: var(--color-accent-dark); }
        /* ENHANCEMENT: CTA Section color changed for contrast */
        .impact-section.cta { background-color: var(--color-dark); }
        .impact-section h3 { font-family: var(--font-heading); font-size: 1.25rem; color: var(--color-slate-200); margin-bottom: 1rem; }
        .impact-number { font-family: var(--font-heading); font-size: clamp(3rem, 8vw, 4.5rem); font-weight: 700; line-height: 1.1; margin-bottom: 1rem; }
        .impact-section p { color: var(--color-slate-400); font-size: 0.9rem; max-width: 450px; margin: 0 auto; }
        .impact-section.problem .impact-number { color: var(--color-contrast); }
        .impact-section .impact-number { color: var(--color-accent); }
        .breakdown-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2.5rem; }
        .breakdown-card { border-radius: 16px; padding: 2rem 1.5rem; text-align: center; border: 1px solid var(--color-slate-200); background-color: var(--color-light); }
        /* ENHANCEMENT: Improved spacing and clarity */
        .breakdown-card h4 { font-size: 1.1rem; font-weight: 600; color: var(--color-dark); margin-bottom: 1rem; }
        .breakdown-value { font-family: var(--font-heading); font-size: clamp(2rem, 5vw, 2.75rem); line-height: 1; color: var(--color-accent); margin-bottom: 1rem; }
        .breakdown-card p { font-size: 0.875rem; line-height: 1.5; color: var(--color-slate-600); }
        .cta-form { display: flex; gap: 1rem; max-width: 500px; margin: 0 auto; }
        .cta-form input { flex-grow: 1; padding: 1rem; border: 1px solid transparent; border-radius: 12px; font-size: 1rem; font-family: var(--font-body); }
        .cta-form input:focus { outline: none; box-shadow: 0 0 0 3px color-mix(in srgb, white 50%, transparent); }
        .cta-button { background: white; color: var(--color-accent-dark); padding: 1rem 1.5rem; border: none; border-radius: 12px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: var(--transition-fast); }
        .cta-button:hover:not(:disabled) { transform: translateY(-3px); box-shadow: var(--shadow-lg); color: var(--color-dark); }
        .cta-button:disabled { background-color: var(--color-slate-200); color: var(--color-slate-400); cursor: not-allowed; }
        .site-footer { padding: 2rem; text-align: center; font-size: 0.875rem; color: var(--color-slate-400); background-color: var(--color-light); border-top: 1px solid var(--color-slate-200); }
        .disclaimer { font-size: 0.75rem; color: var(--color-slate-400); max-width: 800px; margin: 1.5rem auto 0; line-height: 1.6; }
        @media (max-width: 992px) { .main-grid { grid-template-columns: 1fr; } .input-panel { border-right: none; border-bottom: 1px solid var(--color-slate-200); } }
        @media (max-width: 768px) { body { padding: 1rem 0.5rem; } .hero, .input-panel, .results-panel, .cta-section { padding: 2rem 1.5rem; } .breakdown-grid { grid-template-columns: 1fr; } .cta-form { flex-direction: column; } }
    </style>
</head>
<body>

    <div class="container">
        <header class="hero">
            <h1>From Operational Drag to <br><span class="highlight">Exponential Growth.</span></h1>
            <p>Your multi-location business has huge potential, but slow, disconnected systems are an anchor. Quantify the hidden costs of inefficiency and discover the growth capital you can unlock.</p>
        </header>

        <main class="main-grid">
            <div class="input-panel">
                <h2>
                    Your Operational Profile
                    <span id="location-count-badge" class="location-count"></span>
                </h2>
                <div id="location-list" class="location-list"></div>
                <button id="add-location-btn" class="add-location-btn">+ Add Another Location</button>
                <div class="form-group">
                    <label for="reconciliation-time">Weekly Reconciliation Time per Location</label>
                    <select id="reconciliation-time">
                        <option value="4">Complex (4+ hours)</option>
                        <option value="3" selected>Standard (3 hours)</option>
                        <option value="2">Efficient (2 hours)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="settlement-delay">Current Average Settlement Delay</label>
                    <select id="settlement-delay">
                        <option value="3" selected>3 Business Days</option>
                        <option value="2">2 Business Days</option>
                    </select>
                </div>
            </div>

            <div class="results-panel">
                 <h2>Your Growth & Efficiency Blueprint</h2>
                <div class="impact-section problem">
                    <h3>Annual Cost of Operational Drag</h3>
                    <div class="impact-number" id="annual-drag">£0</div>
                    <p>This is the estimated total annual cost of your current operational inefficiencies, combining wasted labor and revenue lost to errors.</p>
                </div>
                <h3 class="solution-header">Your Optimized Payment Solution</h3>
                <div class="breakdown-grid">
                    <div class="breakdown-card">
                        <h4>Recaptured Labor Value</h4>
                        <div class="breakdown-value" id="labor-savings">£0</div>
                        <!-- ENHANCEMENT: Concise text -->
                        <p>From 80%+ faster team reconciliation.</p>
                    </div>
                    <div class="breakdown-card">
                        <h4>Eliminated Error Costs</h4>
                        <div class="breakdown-value" id="error-savings">£0</div>
                        <!-- ENHANCEMENT: Concise text -->
                        <p>From stopping costly manual payment errors.</p>
                    </div>
                </div>
                <div class="impact-section">
                    <h3>Unlocked Working Capital</h3>
                    <div class="impact-number" id="working-capital-unlocked">£0</div>
                    <p>The permanent, one-time increase in your cash-on-hand from moving to next-day settlements.</p>
                </div>
                <div class="impact-section funding">
                    <h3>Available Growth Funding</h3>
                    <div class="impact-number" id="available-funding">£0</div>
                    <p>The amount of flexible, revenue-based capital you can access to fuel your next stage of growth.</p>
                </div>
                <!-- ENHANCEMENT: CTA Section redesigned -->
                <div class="impact-section cta">
                    <h3>Activate Your Operational Efficiency Blueprint</h3>
                    <form id="cta-form" class="cta-form" action="https://api.web3forms.com/submit" method="POST">
                        <input type="hidden" name="access_key" value="9b04c636-7380-446b-9269-f2a283b02a81">
                        <input type="hidden" name="subject" value="New Submission: Operational Efficiency Calculator">
                        <input type="hidden" name="from_name" value="Crude Capital Calculators">
                        <input type="hidden" name="calculator" value="Operational Efficiency Engine">
                        <input type="hidden" id="calculation-results" name="results" value="">
                        <input type="email" id="prospect-email" name="email" placeholder="Enter your business email" required>
                        <button type="submit" id="cta-button" class="cta-button" disabled>Get Your Detailed Report</button>
                    </form>
                    <p style="color: rgba(255,255,255,0.7); margin-top: 16px; font-size: 14px; text-align: center;">
                        or <a href="https://calendly.com/crude-capital-info/30min" target="_blank" rel="noopener noreferrer" style="color: white; text-decoration: underline; font-weight: 600;">Book a Consultation</a> to discuss your results
                    </p>
                </div>
            </div>
        </main>
        
        <!-- ENHANCEMENT: Footer restored -->
        <footer class="site-footer">
            <p>© 2025 Crude Capital Payments Intelligence. All Rights Reserved.</p>
            <p class="disclaimer">*Disclaimer: These figures are estimates for strategic planning, based on industry averages and case study data. Actual savings and funding amounts are subject to a full business assessment. This tool does not constitute a binding financial quote.</p>
        </footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- 1. SETUP: DOM ELEMENTS, CONFIG, AND STATE ---
        const elements = {
            locationList: document.getElementById('location-list'),
            addLocationBtn: document.getElementById('add-location-btn'),
            reconciliationTime: document.getElementById('reconciliation-time'),
            settlementDelay: document.getElementById('settlement-delay'),
            annualDrag: document.getElementById('annual-drag'),
            laborSavings: document.getElementById('labor-savings'),
            errorSavings: document.getElementById('error-savings'),
            workingCapitalUnlocked: document.getElementById('working-capital-unlocked'),
            availableFunding: document.getElementById('available-funding'),
            locationCountBadge: document.getElementById('location-count-badge'),
            ctaForm: document.getElementById('cta-form'),
            emailInput: document.getElementById('prospect-email'),
            ctaButton: document.getElementById('cta-button')
        };
        const DOJO_METRICS = {
            managerHourlyRate: 28, avgErrorRate: 0.0015, dojoReconTime: 0.5,
            cardTurnoverPercentage: 0.85, fundingMultiplier: 0.10, dojoSettlementDelay: 1
        };
        let lastCalculated = {};

        // --- 2. CORE FUNCTIONS ---
        const debounce = (func, delay) => {
            let timeout;
            return (...args) => {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), delay);
            };
        };
        const animateValue = (obj, start, end, duration, prefix = '£', suffix = '') => {
            if (!obj || isNaN(start) || isNaN(end)) return;
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!document.body.contains(obj)) return;
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const currentValue = Math.floor(progress * (end - start) + start);
                obj.innerHTML = `${prefix}${currentValue.toLocaleString('en-GB')}${suffix}`;
                if (progress < 1) window.requestAnimationFrame(step);
                else obj.innerHTML = `${prefix}${Math.round(end).toLocaleString('en-GB')}${suffix}`;
            };
            window.requestAnimationFrame(step);
        };
        const calculateAndDisplay = () => {
            const locationCards = document.querySelectorAll('.location-input-card');
            const numLocations = locationCards.length;
            const reconHours = parseFloat(elements.reconciliationTime.value);
            const settlementDays = parseFloat(elements.settlementDelay.value);
            const totalMonthlyRevenue = Array.from(locationCards).reduce((acc, card) => acc + parseFloat(card.querySelector('.location-revenue-slider').value), 0);
            const totalAnnualRevenue = totalMonthlyRevenue * 12;
            const currentWeeklyRecon = numLocations * reconHours;
            const laborCost = currentWeeklyRecon * 52 * DOJO_METRICS.managerHourlyRate;
            const errorCost = totalAnnualRevenue * DOJO_METRICS.avgErrorRate;
            const dragCost = laborCost + errorCost;
            const dojoWeeklyRecon = numLocations * DOJO_METRICS.dojoReconTime;
            const laborSavings = (currentWeeklyRecon - dojoWeeklyRecon) * 52 * DOJO_METRICS.managerHourlyRate;
            const capital = (totalMonthlyRevenue / 30) * (settlementDays - DOJO_METRICS.dojoSettlementDelay);
            const funding = (totalAnnualRevenue * DOJO_METRICS.cardTurnoverPercentage) * DOJO_METRICS.fundingMultiplier;
            animateValue(elements.annualDrag, lastCalculated.drag || 0, dragCost, 800);
            animateValue(elements.laborSavings, lastCalculated.labor || 0, laborSavings, 600);
            animateValue(elements.errorSavings, lastCalculated.error || 0, errorCost, 600);
            animateValue(elements.workingCapitalUnlocked, lastCalculated.capital || 0, capital, 700);
            animateValue(elements.availableFunding, lastCalculated.funding || 0, funding, 700);
            lastCalculated = { drag: dragCost, labor: laborSavings, error: errorCost, capital: capital, funding: funding };

            // Update CTA with calculation results
            const locationCount = revenueBuckets.length;
            const totalRevenue = revenueBuckets.reduce((sum, rev) => sum + rev, 0);
            const resultsText = `
Operational Efficiency Analysis Results:

Number of Locations: ${locationCount}
Total Monthly Revenue: £${totalRevenue.toLocaleString('en-GB')}
Current Reconciliation Time: ${elements.reconciliationTime.value} hours per location per week
Current Settlement Delay: ${elements.settlementDelay.value} days

Your Annual Operational Efficiency Gains:
- Eliminated Admin Drag: £${dragCost.toLocaleString('en-GB', {minimumFractionDigits: 2, maximumFractionDigits: 2})}
- Reclaimed Labor Savings: £${laborSavings.toLocaleString('en-GB', {minimumFractionDigits: 2, maximumFractionDigits: 2})}
- Error & Reconciliation Cost Reduction: £${errorCost.toLocaleString('en-GB', {minimumFractionDigits: 2, maximumFractionDigits: 2})}

TOTAL ANNUAL SAVINGS: £${(dragCost + laborSavings + errorCost).toLocaleString('en-GB', {minimumFractionDigits: 2, maximumFractionDigits: 2})}

Working Capital Unlocked: £${capital.toLocaleString('en-GB', {minimumFractionDigits: 2, maximumFractionDigits: 2})}
Available Growth Funding: £${funding.toLocaleString('en-GB', {minimumFractionDigits: 2, maximumFractionDigits: 2})}
            `.trim();

            const resultsInput = document.getElementById('calculation-results');
            if (resultsInput) {
                resultsInput.value = resultsText;
            }
        };
        const debouncedCalculate = debounce(calculateAndDisplay, 250);
        const reNumberLocations = () => {
            const allCards = elements.locationList.querySelectorAll('.location-input-card');
            allCards.forEach((card, index) => {
                card.querySelector('.slider-label').textContent = `Location ${index + 1} Monthly Revenue`;
            });
            const count = allCards.length;
            elements.locationCountBadge.textContent = `${count} LOCATION${count !== 1 ? 'S' : ''}`;
        };
        const addLocation = (value) => {
            const card = document.createElement('div');
            card.className = 'location-input-card';
            card.innerHTML = `
                <div class="slider-group">
                    <div class="slider-label-container">
                        <label class="slider-label"></label>
                        <div class="slider-value">£${value.toLocaleString('en-GB')}</div>
                    </div>
                    <input type="range" class="location-revenue-slider" min="5000" max="250000" step="1000" value="${value}">
                </div>
                <button class="remove-location-btn" aria-label="Remove Location">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="pointer-events: none;"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>`;
            elements.locationList.appendChild(card);
            reNumberLocations();
        };

        // --- 3. EVENT LISTENERS ---
        elements.addLocationBtn.addEventListener('click', () => {
            addLocation(45000);
            debouncedCalculate();
        });
        elements.locationList.addEventListener('input', (event) => {
            if (event.target.matches('.location-revenue-slider')) {
                const card = event.target.closest('.location-input-card');
                card.querySelector('.slider-value').textContent = `£${parseFloat(event.target.value).toLocaleString('en-GB')}`;
                debouncedCalculate();
            }
        });
        elements.locationList.addEventListener('click', (event) => {
            if (event.target.closest('.remove-location-btn')) {
                const card = event.target.closest('.location-input-card');
                if (card) {
                    card.remove();
                    reNumberLocations();
                    debouncedCalculate();
                }
            }
        });
        elements.reconciliationTime.addEventListener('change', debouncedCalculate);
        elements.settlementDelay.addEventListener('change', debouncedCalculate);
        elements.emailInput.addEventListener('input', () => {
            elements.ctaButton.disabled = !elements.emailInput.checkValidity();
        });
        elements.ctaForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            try {
                const response = await fetch(elements.ctaForm.action, {
                    method: 'POST',
                    body: new FormData(elements.ctaForm),
                    headers: { 'Accept': 'application/json' }
                });
                if (response.ok) {
                    alert('Report sent! Check your email for your detailed analysis and booking link.');
                    elements.ctaForm.reset();
                    elements.ctaButton.disabled = true;
                } else {
                    alert('Error sending report. Please try again.');
                }
            } catch (error) {
                alert('Error sending report. Please try again.');
            }
        });

        // --- 4. INITIALIZATION ---
        const initialize = () => {
            let initialState = {
                locations: [64000, 47000],
                reconTime: '3',
                settlementDelay: '3'
            };
            try {
                const savedState = JSON.parse(localStorage.getItem('growthEngineState'));
                if (savedState && savedState.locations && savedState.locations.length > 0) {
                    initialState = savedState;
                }
            } catch (e) { console.warn("localStorage not accessible. Using default state."); }
            
            elements.locationList.innerHTML = '';
            initialState.locations.forEach(val => addLocation(val));
            elements.reconciliationTime.value = initialState.reconTime;
            elements.settlementDelay.value = initialState.settlementDelay;
            
            calculateAndDisplay();
            
            window.addEventListener('beforeunload', () => {
                try {
                    const currentState = {
                        locations: Array.from(document.querySelectorAll('.location-revenue-slider')).map(s => s.value),
                        reconTime: elements.reconciliationTime.value,
                        settlementDelay: elements.settlementDelay.value
                    };
                    localStorage.setItem('growthEngineState', JSON.stringify(currentState));
                } catch (e) { /* Fail silently */ }
            });
        };
        initialize();
    });
    </script>
</body>
</html>