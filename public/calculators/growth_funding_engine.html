<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Growth Funding Engine | Crude Capital</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-dark: #111827; --color-light: #F9FAFB; --color-slate-600: #475569;
            --color-slate-400: #94A3B8; --color-slate-200: #E2E8F0; --color-accent: #14B8A6;
            --color-accent-dark: #0F766E; --color-contrast: #8B5CF6; --color-contrast-dark: #6D28D9;
            --font-heading: 'Sora', sans-serif; --font-body: 'Inter', sans-serif;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-interactive: 0 0 0 3px color-mix(in srgb, var(--color-accent) 20%, transparent);
            --transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-body); background-color: var(--color-light); color: var(--color-slate-600);
            padding: 2rem 1rem; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
        }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 24px; box-shadow: var(--shadow-lg); overflow: hidden; border: 1px solid var(--color-slate-200); }
        .main-grid { display: grid; grid-template-columns: 1fr 1.1fr; }
        .hero { padding: 4rem; text-align: center; background: var(--color-dark); }
        .hero h1 { font-family: var(--font-heading); color: white; font-size: clamp(2.5rem, 5vw, 3.25rem); line-height: 1.1; margin-bottom: 1rem; }
        .hero h1 .highlight { color: var(--color-accent); }
        .hero p { font-size: clamp(1rem, 2vw, 1.1rem); max-width: 700px; margin: 0 auto; color: var(--color-slate-400); line-height: 1.6; }
        .input-panel { padding: 3rem; background-color: var(--color-light); border-right: 1px solid var(--color-slate-200); }
        .input-panel h2 { font-family: var(--font-heading); color: var(--color-dark); font-size: 1.75rem; margin-bottom: 2.5rem; }
        .form-group { margin-bottom: 2.5rem; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 0.75rem; color: var(--color-dark); }
        .form-group select {
            width: 100%; padding: 1rem; border: 1px solid var(--color-slate-200); border-radius: 12px;
            font-size: 1rem; background-color: white; -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2364748b' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.7rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;
        }
        .form-group select:focus { outline: none; border-color: var(--color-accent); box-shadow: var(--shadow-interactive); }
        .slider-group { margin-bottom: 2.5rem; }
        .slider-label-container { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 1rem; }
        .slider-label { font-size: 1rem; font-weight: 600; color: var(--color-dark); }
        .slider-value { font-family: var(--font-heading); font-size: 1.75rem; font-weight: 600; color: var(--color-accent); }
        input[type="range"] { -webkit-appearance: none; width: 100%; height: 8px; background: var(--color-slate-200); border-radius: 5px; outline: none; padding: 0; margin: 0; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; background: white; border-radius: 50%; border: 5px solid var(--color-accent); cursor: pointer; transition: transform 0.2s ease; margin-top: -8px; }
        
        .results-panel { padding: 3rem; background-color: white; }
        .results-panel h2 { font-family: var(--font-heading); color: var(--color-dark); font-size: 1.75rem; text-align: center; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; gap: 0.75rem; }
        .eligibility-check { text-align: center; padding: 1.5rem; border-radius: 16px; margin-bottom: 2.5rem; border: 1px solid transparent; transition: all 0.3s ease; }
        .eligibility-check.eligible { background-color: color-mix(in srgb, var(--color-accent) 10%, white); color: var(--color-accent-dark); border-color: var(--color-accent); }
        .eligibility-check.not-eligible { background-color: color-mix(in srgb, var(--color-contrast) 10%, white); color: var(--color-contrast-dark); border-color: var(--color-contrast); }
        .eligibility-check h3 { margin-bottom: 0.5rem; font-size: 1.25rem; }
        .impact-section { background-color: var(--color-dark); color: white; padding: 2.5rem; border-radius: 16px; text-align: center; margin-bottom: 2.5rem; }
        .impact-section h3 { font-family: var(--font-heading); font-size: 1.25rem; color: var(--color-slate-200); margin-bottom: 0.5rem; }
        .impact-number { font-family: var(--font-heading); font-size: clamp(3rem, 8vw, 4.5rem); font-weight: 700; color: var(--color-accent); line-height: 1.1; margin-bottom: 1rem; }
        .impact-section p { color: var(--color-slate-400); font-size: 0.9rem; max-width: 450px; margin: 0 auto;}

        .repayment-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem; margin-bottom: 2.5rem; }
        .repayment-card { background-color: var(--color-light); border-radius: 16px; padding: 1.5rem; text-align: center; border: 1px solid var(--color-slate-200); }
        .repayment-card h4 { font-size: 1rem; font-weight: 600; color: var(--color-slate-600); margin-bottom: 0.75rem; }
        .repayment-value { font-family: var(--font-heading); font-size: clamp(1.75rem, 5vw, 2.25rem); font-weight: 700; line-height: 1; margin-bottom: 0.75rem; }
        .repayment-card.total .repayment-value { color: var(--color-contrast-dark); }
        .repayment-card .repayment-value { color: var(--color-accent-dark); }
        .repayment-card p { font-size: 0.875rem; line-height: 1.5; color: var(--color-slate-600); }

        .cta-section { background-color: var(--color-dark); padding: 2.5rem; border-radius: 16px; text-align: center; }
        .cta-section h3 { font-family: var(--font-heading); font-size: 1.75rem; color: white; margin-bottom: 1.5rem; }
        .cta-form { display: flex; gap: 1rem; max-width: 500px; margin: 0 auto; }
        .cta-form input { flex-grow: 1; padding: 1rem; border: 1px solid transparent; border-radius: 12px; font-size: 1rem; }
        .cta-button { background: var(--color-accent); color: var(--color-dark); padding: 1rem 1.5rem; border: none; border-radius: 12px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: var(--transition-fast); }
        .cta-button:hover:not(:disabled) { background-color: var(--color-accent-dark); color: white; transform: translateY(-3px); box-shadow: var(--shadow-lg); }
        .cta-button:disabled { background-color: var(--color-slate-200); color: var(--color-slate-400); cursor: not-allowed; }
        
        .site-footer { padding: 2rem; text-align: center; font-size: 0.875rem; color: var(--color-slate-400); border-top: 1px solid var(--color-slate-200); }
        .disclaimer { font-size: 0.75rem; color: var(--color-slate-400); max-width: 800px; margin: 1.5rem auto 0; line-height: 1.6; }
        .tooltip { position: relative; display: inline-flex; align-items: center; cursor: help; }
        .tooltip-text { visibility: hidden; width: 250px; background-color: var(--color-dark); color: #fff; text-align: left; border-radius: 6px; padding: 10px; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -125px; opacity: 0; transition: opacity 0.3s; }
        .tooltip:hover .tooltip-text { visibility: visible; opacity: 1; }

        @media (max-width: 992px) { .main-grid { grid-template-columns: 1fr; } .input-panel { border-right: none; border-bottom: 1px solid var(--color-slate-200); } }
        @media (max-width: 768px) { body { padding: 1rem 0.5rem; } .hero, .input-panel, .results-panel, .cta-section { padding: 2rem 1.5rem; } .repayment-grid { grid-template-columns: 1fr; } .cta-form { flex-direction: column; } }
    </style>
</head>
<body>

    <div class="container">
        <header class="hero">
            <h1>From Growth Goals to <br><span class="highlight">Growth Capital.</span></h1>
            <p>Traditional funding is slow and rigid. Our integrated funding is fast, flexible, and based on your performance. Discover the capital you can access to accelerate your growth, right now.</p>
        </header>

        <main class="main-grid">
            <div class="input-panel">
                <h2>Your Growth Profile</h2>
                <div class="slider-group">
                    <div class="slider-label-container">
                        <label for="monthly-revenue-slider" class="slider-label">Average Monthly Card Revenue</label>
                        <div id="slider-value-display" class="slider-value">Â£45,000</div>
                    </div>
                    <input type="range" id="monthly-revenue-slider" min="1000" max="250000" step="1000" value="45000">
                </div>
                <div class="form-group">
                    <label for="is-customer">Your relationship with Crude Capital Merchants</label>
                    <select id="is-customer">
                        <option value="no" selected>Not yet a customer</option>
                        <option value="yes_under_3_months">New customer (under 3 months)</option>
                        <option value="yes_over_3_months">Established customer (3+ months)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="funding-purpose">Primary goal for funding</label>
                    <select id="funding-purpose">
                        <option value="Expansion" data-icon="ð¢">Location expansion</option>
                        <option value="Inventory" data-icon="ð¦" selected>Inventory / Stock purchase</option>
                        <option value="Equipment" data-icon="âï¸">Equipment upgrade</option>
                        <option value="Renovation" data-icon="ð¨">Refurbishment / Renovation</option>
                        <option value="Marketing" data-icon="ð">Marketing / Growth campaign</option>
                        <option value="Working Capital" data-icon="ð¼">General working capital</option>
                    </select>
                </div>
            </div>

            <div class="results-panel">
                <h2 id="results-header"><span id="purpose-icon">ð¦</span> Your Funding Blueprint</h2>
                <div id="eligibility-check" class="eligibility-check">
                    <h3 id="eligibility-title">Eligibility Status</h3>
                    <p id="eligibility-message">Complete your profile to see funding status.</p>
                </div>
                <div id="funding-results" style="display: none;">
                    <div class="impact-section">
                        <h3>Potential Funding Amount</h3>
                        <div class="impact-number" id="available-funding">Â£0</div>
                        <p>Based on your revenue, this is the funding you could access in as little as 48 hours.</p>
                    </div>
                    <h3 style="text-align: center; font-family: var(--font-heading); font-size: 1.5rem; margin-bottom: 1.5rem;">How Repayment Works</h3>
                    <div class="repayment-grid">
                        <div class="repayment-card">
                            <h4>Daily Repayment</h4>
                            <div class="repayment-value" id="daily-repayment">Â£0</div>
                            <p>Paid flexibly from a fixed 15% of daily sales.</p>
                        </div>
                        <div class="repayment-card total">
                            <h4>Total Repayment <span class="tooltip">â<span class="tooltip-text">This is the total amount you repay, including the principal and a transparent, fixed fee. There is no compounding interest.</span></span></h4>
                            <div class="repayment-value" id="total-repayment">Â£0</div>
                            <p>Includes a single, fixed fee. Simple.</p>
                        </div>
                        <div class="repayment-card">
                            <h4>Estimated Term</h4>
                            <div class="repayment-value" id="funding-term">0 Mths</div>
                            <p>Pay faster in busy months, slower in quiet ones.</p>
                        </div>
                    </div>
                </div>
                <div class="cta-section">
                    <h3>Take the Next Step</h3>
                    <form id="cta-form" class="cta-form" action="https://api.web3forms.com/submit" method="POST">
                        <input type="hidden" name="access_key" value="9b04c636-7380-446b-9269-f2a283b02a81">
                        <input type="hidden" name="subject" value="New Submission: Growth Funding Engine">
                        <input type="hidden" name="from_name" value="Crude Capital Calculators">
                        <input type="hidden" name="calculator" value="Growth Funding Engine">
                        <input type="hidden" id="calculation-results" name="results" value="">
                        <input type="email" id="prospect-email" name="email" placeholder="Enter your business email" required>
                        <button type="submit" id="cta-button" class="cta-button" disabled>Get Your Detailed Report</button>
                    </form>
                    <p style="color: rgba(255,255,255,0.7); margin-top: 16px; font-size: 14px; text-align: center;">
                        or <a href="https://calendly.com/crude-capital-info/30min" target="_blank" rel="noopener noreferrer" style="color: var(--color-accent); text-decoration: underline; font-weight: 600;">Book a Consultation</a> to discuss your results
                    </p>
                </div>
            </div>
        </main>
        <footer class="site-footer">
            <p>Â© 2025 Crude Capital Payments Intelligence. All Rights Reserved.</p>
            <p class="disclaimer">*Disclaimer: These figures are estimates for strategic planning, based on industry-specific financial models. Actual costs depend on multiple business factors. This tool does not constitute financial advice.</p>
        </footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const elements = {
            revenueSlider: document.getElementById('monthly-revenue-slider'),
            sliderValueDisplay: document.getElementById('slider-value-display'),
            isCustomer: document.getElementById('is-customer'),
            fundingPurpose: document.getElementById('funding-purpose'),
            resultsHeader: document.getElementById('results-header'),
            purposeIcon: document.getElementById('purpose-icon'),
            eligibilityCheck: document.getElementById('eligibility-check'),
            eligibilityTitle: document.getElementById('eligibility-title'),
            eligibilityMessage: document.getElementById('eligibility-message'),
            fundingResults: document.getElementById('funding-results'),
            availableFunding: document.getElementById('available-funding'),
            dailyRepayment: document.getElementById('daily-repayment'),
            totalRepayment: document.getElementById('total-repayment'),
            fundingTerm: document.getElementById('funding-term'),
            ctaForm: document.getElementById('cta-form'),
            emailInput: document.getElementById('prospect-email'),
            ctaButton: document.getElementById('cta-button')
        };

        const FUNDING_MODEL = {
            minMonthlyRevenue: 1000, minCustomerMonths: 3,
            baseAnnualTurnoverPercent: 0.10, customerBonusPercent: 0.05,
            fundingCap: 1000000, repaymentRate: 0.15, fundingFee: 0.12
        };

        let lastCalculated = {};

        const animateValue = (obj, start, end, duration, prefix = 'Â£', suffix = '') => {
            if (!obj || isNaN(start) || isNaN(end)) return;
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!document.body.contains(obj)) return;
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const val = Math.floor(progress * (end - start) + start);
                obj.innerHTML = `${prefix}${val.toLocaleString('en-GB')}${suffix}`;
                if (progress < 1) window.requestAnimationFrame(step);
                else obj.innerHTML = `${prefix}${Math.round(end).toLocaleString('en-GB')}${suffix}`;
            };
            window.requestAnimationFrame(step);
        };

        const calculateAndDisplay = () => {
            const monthlyRevenue = parseFloat(elements.revenueSlider.value);
            const customerStatus = elements.isCustomer.value;
            const selectedOption = elements.fundingPurpose.selectedOptions[0];
            const purposeText = selectedOption.text;
            const purposeIcon = selectedOption.dataset.icon;
            
            elements.purposeIcon.textContent = purposeIcon;
            elements.resultsHeader.innerHTML = `<span id="purpose-icon">${purposeIcon}</span> Your Blueprint for ${purposeText}`;

            let isEligible = false;
            let eligibilityTitleText = "";
            let eligibilityMessageText = "";

            if (customerStatus === 'yes_over_3_months') {
                isEligible = monthlyRevenue >= FUNDING_MODEL.minMonthlyRevenue;
                eligibilityTitleText = isEligible ? "You're Eligible!" : "Requirement Not Met";
                eligibilityMessageText = isEligible ? "As an established partner, you qualify for our best funding offers." : `Your monthly revenue is below the Â£${FUNDING_MODEL.minMonthlyRevenue.toLocaleString()} minimum.`;
            } else if (customerStatus === 'yes_under_3_months') {
                isEligible = false;
                eligibilityTitleText = "Almost There!";
                eligibilityMessageText = `Funding is available after ${FUNDING_MODEL.minCustomerMonths} months of partnership. Your business is on the right track!`;
            } else { // Not a customer
                isEligible = monthlyRevenue >= FUNDING_MODEL.minMonthlyRevenue;
                eligibilityTitleText = isEligible ? "You're a Strong Candidate!" : "Requirement Not Met";
                eligibilityMessageText = isEligible ? "Your business meets the revenue criteria. Partnership with us is the first step to unlock this funding." : `A minimum of Â£${FUNDING_MODEL.minMonthlyRevenue.toLocaleString()}/month in card revenue is needed to qualify.`;
            }
            
            elements.eligibilityCheck.className = `eligibility-check ${isEligible ? 'eligible' : 'not-eligible'}`;
            elements.eligibilityTitle.textContent = eligibilityTitleText;
            elements.eligibilityMessage.textContent = eligibilityMessageText;
            
            elements.fundingResults.style.display = isEligible ? 'block' : 'none';

            const fundingPercent = FUNDING_MODEL.baseAnnualTurnoverPercent + (customerStatus === 'yes_over_3_months' ? FUNDING_MODEL.customerBonusPercent : 0);
            const potentialFunding = isEligible ? Math.min(FUNDING_MODEL.fundingCap, (monthlyRevenue * 12) * fundingPercent) : 0;
            const totalRepayment = potentialFunding * (1 + FUNDING_MODEL.fundingFee);
            const dailyRepayment = (monthlyRevenue / 30) * FUNDING_MODEL.repaymentRate;
            const term = (dailyRepayment > 0) ? totalRepayment / dailyRepayment / 30 : 0;

            animateValue(elements.availableFunding, lastCalculated.funding || 0, potentialFunding, 800);
            animateValue(elements.totalRepayment, lastCalculated.total || 0, totalRepayment, 700);
            animateValue(elements.dailyRepayment, lastCalculated.daily || 0, dailyRepayment, 600);
            animateValue(elements.fundingTerm, lastCalculated.term || 0, term, 500, '', ' Mths');

            lastCalculated = { funding: potentialFunding, total: totalRepayment, daily: dailyRepayment, term: term };
        };

        const updateSliderDisplay = () => {
            elements.sliderValueDisplay.textContent = `Â£${parseFloat(elements.revenueSlider.value).toLocaleString('en-GB')}`;
        };
        
        const allInputs = [elements.revenueSlider, elements.isCustomer, elements.fundingPurpose];
        allInputs.forEach(el => el.addEventListener('input', () => {
            updateSliderDisplay();
            calculateAndDisplay();
        }));
        
        elements.emailInput.addEventListener('input', () => {
            elements.ctaButton.disabled = !elements.emailInput.checkValidity();
        });

        // Form submission handler
        elements.ctaForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const resultsInput = document.getElementById('calculation-results');
            const resultsText = `
Monthly Revenue: Â£${elements.revenueSlider.value}
Funding Available: ${elements.fundingAvailable.textContent}
Monthly Repayment: ${elements.monthlyRepayment.textContent}
Total Repayment: ${elements.totalRepayment.textContent}
Term: ${elements.fundingTerm.textContent}
            `.trim();
            resultsInput.value = resultsText;

            // Submit to Formspree
            fetch(elements.ctaForm.action, {
                method: 'POST',
                body: new FormData(elements.ctaForm),
                headers: { 'Accept': 'application/json' }
            }).then(response => {
                if (response.ok) {
                    alert('Report sent! Check your email for your detailed analysis and booking link.');
                    elements.ctaForm.reset();
                } else {
                    alert('Error sending report. Please try again.');
                }
            }).catch(() => alert('Error sending report. Please try again.'));
        });

        // Initialize
        updateSliderDisplay();
        calculateAndDisplay();
    });
    </script>
</body>
</html>